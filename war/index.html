<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>WordPong</title>
<meta http-equiv="Expires" content="0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="/css/jquery.mobile-1.0a4pre.css" />
<link rel="stylesheet" href="/css/wp.css" type="text/css">
<script type="text/javascript" src="/js/jquery-1.5.min.js"></script>
<script type="text/javascript" src="/js/jquery.tmpl.min.js"></script>
<script type="text/javascript" src="/js/jquery.cookie.js"></script>
<script type="text/javascript" src="/js/dump.js"></script>
<script type="text/javascript" src="/js/main.js"></script>
<script type="text/javascript" src="/js/dateFormat.js"></script>
<script type="text/javascript" src="/js/jquery.mobile-1.0a4pre.min.js"></script>
</head>
<body>

<div class="wp-page" data-role="page" data-theme="a" style="width:100%" >
<div class="page-content">
     <div class="wp-loading">
	     <a href="https://wordpong.appspot.com">wp</a>
 	 </div>
</div>
<div class='wp-status'></div>
<div class='wp-date'></div>
<br/>
<br/>
<div class='wp-footer'></div>
<form action="/Login.wp" method="post" style='visibility:hidden'>
<input id="wp-init-btn" name="view" value="Load App" type="submit" class="process"/>
</form>
<script type="text/javascript">
$("input.process").live( "click", function(e) {
    e.preventDefault();
    var action = this.form.action + '?_eventName=' + this.name;
    var params = $(this.form).serialize();
    $.mobile.pageLoading(); //  show the wait icon
    var xhr = $.post(action, params, function(data) {
        if (xhr.getResponseHeader('Stripes-Success') == "OK") {
            $.mobile.pageLoading(true);//close the wait icon
            var content = $(e).parents('.ui-page-active .page-content:first')
            content.html(data)
            var d = $('.wp-date')
            d.html(dateFormat(new Date(),"HH:MM:ss mmm dd"))
            var p= $('.ui-page-active [data-role="content"]')
            // todo: http://forum.jquery.com/topic/page-level-refresh
            //  add to cache... transisition, back button support
            $('.wp-footer').html(wpFooter);
            p.width($(".wp-page").outerWidth() - 30 );  
            p.page()
            $('html, body').animate({scrollTop:0}, 'slow');
        } else {
            alert("Login session expired.");
            window.location.reload(true);
        }
    });
});
$(window).resize(function() {
	var p= $('.ui-page-active [data-role="content"]')
	p.width($(".wp-page").outerWidth() - 30 ); 
});
$(document).ready(function() {
    $('#wp-init-btn').click();
});
</script>
</div>
</body>
</html>
